<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Stegano ‚Äî Secure Data Hiding</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="/static/css/styles.css" rel="stylesheet">
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<div class="container-fluid">
				<a class="navbar-brand" href="/">Stegano</a>
				<div class="ms-auto d-flex align-items-center gap-3">
					<!-- Profile Dropdown (hidden by default) -->
					<div id="profileSection" class="d-none">
						<div class="profile-dropdown">
							<button class="profile-trigger" onclick="toggleProfileDropdown()">
								<div class="profile-avatar">
									<img id="profileImage" src="" alt="Profile" class="profile-img" style="display: none;">
									<div class="avatar-circle" id="avatarCircle">
										<span id="userInitials">U</span>
									</div>
								</div>
								<span class="profile-name" id="userName">User</span>
								<i class="dropdown-arrow">‚ñº</i>
							</button>
							
							<div class="profile-dropdown-menu" id="profileDropdownMenu">
								<div class="profile-header">
									<div class="profile-avatar-large">
										<img id="profileImageLarge" src="" alt="Profile" class="profile-img-large" style="display: none;">
										<div class="avatar-circle-large" id="avatarCircleLarge">
											<span id="userInitialsLarge">U</span>
										</div>
									</div>
									<div class="profile-details">
										<h6 class="profile-name-large" id="userNameLarge">User Name</h6>
										<p class="profile-email" id="userEmail">user@stegano.com</p>
										<span class="profile-role" id="userRole">Security Analyst</span>
									</div>
								</div>
								
								<div class="profile-actions">
									<button class="profile-action-btn" onclick="openProfileSettings()">
										<i class="action-icon">‚öôÔ∏è</i>
										<span>Settings</span>
									</button>
									<button class="profile-action-btn" onclick="changeProfilePicture()">
										<i class="action-icon">üì∑</i>
										<span>Change Photo</span>
									</button>
									<button class="profile-action-btn" onclick="viewProfile()">
										<i class="action-icon">üë§</i>
										<span>View Profile</span>
									</button>
									<hr class="profile-divider">
									<button class="profile-action-btn logout-btn" onclick="logout()">
										<i class="action-icon">üö™</i>
										<span>Logout</span>
									</button>
								</div>
							</div>
						</div>
					</div>
					
					<!-- Login Button (shown by default) -->
					<a class="btn btn-outline-primary btn-sm" href="/login" id="loginBtn">Login</a>
					<button class="btn btn-outline-success btn-sm" onclick="simulateLogin()" id="demoLoginBtn">Demo Login</button>
					
					<div class="form-check form-switch">
						<input class="form-check-input" type="checkbox" role="switch" id="themeSwitch">
						<label class="form-check-label" for="themeSwitch">Dark mode</label>
					</div>
				</div>
			</div>
		</nav>

		<div class="container py-4">
			<h1 class="mb-3">STEGANO</h1>
			<p class="text-muted">Advanced Steganography Platform ‚Ä¢ Dual-Layer Security ‚Ä¢ AES/RSA Encryption</p>

			<div class="tab-container">
				<div class="tab-nav">
					<button class="tab-btn active" data-tab="embed">EMBED DATA</button>
					<button class="tab-btn" data-tab="extract">EXTRACT DATA</button>
				</div>

				<div id="embed-tab" class="tab-content active">
					<form id="embed-form" class="card p-4" enctype="multipart/form-data">
				<div class="mb-3">
					<label class="form-label">Cover file (image: PNG/JPG, audio: WAV, video: MP4)</label>
					<small class="text-muted d-block mb-2">Maximum file size: 2 GB</small>
					<div id="cover-drop" class="drop-zone">
						<input type="file" name="cover" id="cover" class="form-control" accept="image/*,audio/wav,video/*" required>
						<span>Drag & drop or click to select</span>
					</div>
					<div id="cover-preview" class="preview"></div>
					<div id="capacity-hint" class="hint"></div>
					<div id="cover-actions" class="file-actions d-none">
						<button type="button" class="btn btn-sm btn-outline-danger" id="remove-cover">üóëÔ∏è Remove File</button>
					</div>
				</div>

				<div class="row g-3">
					<div class="col-md-6">
						<label class="form-label">Secret text (optional)</label>
						<textarea class="form-control" name="secret_text" rows="4" placeholder="Type secret..."></textarea>
					</div>
					<div class="col-md-6">
						<label class="form-label">Secret file</label>
						<input type="file" name="secret" id="secret" class="form-control">
						<div id="secret-actions" class="file-actions d-none">
							<button type="button" class="btn btn-sm btn-outline-danger" id="remove-secret">üóëÔ∏è Remove File</button>
						</div>
					</div>
				</div>

				<hr>
				<div class="row g-3 align-items-end">
					<div class="col-md-4">
						<label class="form-label">Encryption</label>
						<select class="form-select" name="algo" id="algo">
							<option value="aes">AES-GCM (password)</option>
							<option value="rsa">RSA Hybrid (public key)</option>
						</select>
					</div>
					<div class="col-md-4" id="aes-password">
						<label class="form-label">Password</label>
						<input type="password" class="form-control" name="password" placeholder="Strong password">
					</div>
					<div class="col-md-4 d-none" id="rsa-public">
						<label class="form-label">RSA Public Key (PEM)</label>
						<textarea class="form-control" name="rsa_public_pem" rows="4" placeholder="-----BEGIN PUBLIC KEY-----\n..."></textarea>
					</div>
				</div>

				<div class="mt-3 d-grid">
					<button class="btn btn-primary" type="submit" id="embed-btn"><span id="embed-btn-spin" class="spinner d-none"></span><span>Embed Secret</span></button>
				</div>
			</form>

						<div id="result" class="alert alert-success mt-3 d-none">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<strong>Stego created:</strong> <a id="download-link" href="#" target="_blank">Download</a>
								</div>
								<div class="share-links">
									<a id="share-email" class="btn btn-sm btn-outline-secondary" target="_blank">Email</a>
									<a id="share-wa" class="btn btn-sm btn-outline-success" target="_blank">WhatsApp</a>
									<a id="share-tg" class="btn btn-sm btn-outline-info" target="_blank">Telegram</a>
								</div>
							</div>
						</div>

						<div id="error" class="alert alert-danger mt-3 d-none"></div>
					</form>
				</div>

				<div id="extract-tab" class="tab-content">
					<form id="extract-form" class="card p-4" enctype="multipart/form-data">
						<div class="mb-3">
							<label class="form-label">Stego file (image/audio/video)</label>
							<small class="text-muted d-block mb-2">Maximum file size: 2 GB</small>
							<div id="stego-drop" class="drop-zone">
								<input type="file" name="stego" id="stego" class="form-control" accept="image/*,audio/wav,video/*" required>
								<span>Drag & drop or click to select</span>
							</div>
						</div>

						<div class="row g-3 align-items-end">
							<div class="col-md-6">
								<label class="form-label">Password (for AES)</label>
								<input type="password" class="form-control" name="password" placeholder="If AES used">
							</div>
							<div class="col-md-6">
								<label class="form-label">RSA Private Key (PEM)</label>
								<textarea class="form-control" name="rsa_private_pem" rows="4" placeholder="-----BEGIN PRIVATE KEY-----\n..."></textarea>
							</div>
						</div>

						<div class="mt-3 d-grid">
							<button class="btn btn-primary" type="submit" id="extract-btn"><span id="extract-btn-spin" class="spinner d-none"></span><span>Extract Secret</span></button>
						</div>
					</form>

					<div id="extract-preview" class="preview-section d-none">
						<h5>üìÑ Extracted Data Preview</h5>
						<div id="extract-content"></div>
						<div class="mt-3">
							<button id="download-extracted" class="btn btn-primary">üíæ Download File</button>
						</div>
					</div>

					<div id="x-error" class="alert alert-danger mt-3 d-none"></div>
				</div>
			</div>
		</div>

		<div class="toast-container" id="toast-container"></div>

		<!-- Abstract floating shapes -->
		<div class="floating-shapes">
			<div class="shape"></div>
			<div class="shape"></div>
			<div class="shape"></div>
			<div class="shape"></div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
		<script src="/static/js/main.js"></script>
	</body>
</html>
